<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <script src="/javascripts/RequestManager.js"></script>
    <script>
      function onInputFile(event) {
        RequestManager.handleFileSelect(event, "#imagePreview");
      }
    </script>
  </head>
  <body>
    <h1><%= product.id ? 'Edit product' : 'Add product'%></h1>
    <form
      action="<%= product.id ? '/products/edit/' + product.id + '?_method=PUT' : '/products' %>"
      enctype="multipart/form-data"
      method="POST"
    >
      <hr />
      <label>
        Product title
        <input type="text" name="title" value="<%=product.title%>" required />
      </label>
      <hr />
      <label>
        Product amount
        <input
          type="number"
          name="amount"
          value="<%=product.amount%>"
          required
        />
      </label>
      <hr />
      <label>
        Product price
        <input type="number" name="price" value="<%=product.price%>" required />
      </label>
      <hr />
      <label>
        Image
        <input
          type="file"
          accept="image/*"
          name="prodImg"
          onchange="onInputFile(event)"
        />
      </label>
      <img id="imagePreview" src="/default-image.jpg" class="image" />
      <hr />
      <button type="submit"><%= product.id ? 'Save' : 'Add'%></button>
    </form>
  </body>
</html>
